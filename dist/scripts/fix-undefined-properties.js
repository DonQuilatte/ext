!function(){"use strict";function e(){console.log("[Fix Undefined Properties] Starting comprehensive property initialization..."),function(){try{void 0===window.local_folders&&(window.local_folders=[],console.log("[Fix Undefined Properties] Initialized window.local_folders")),void 0===window.isResetChatHistory&&(window.isResetChatHistory=!1,console.log("[Fix Undefined Properties] Initialized window.isResetChatHistory")),void 0===window.conversations&&(window.conversations=[],console.log("[Fix Undefined Properties] Initialized window.conversations")),void 0===window.userFolders&&(window.userFolders=[],console.log("[Fix Undefined Properties] Initialized window.userFolders")),void 0===window.prompts&&(window.prompts=[],console.log("[Fix Undefined Properties] Initialized window.prompts")),void 0===window.isPremium&&(window.isPremium=!0,console.log("[Fix Undefined Properties] Initialized window.isPremium")),void 0===window.premiumStatus&&(window.premiumStatus={active:!0,plan:"Premium",features:["manage_chats","manage_folders","manage_prompts"]},console.log("[Fix Undefined Properties] Initialized window.premiumStatus")),void 0===window.getConversations&&(window.getConversations=function(){return console.log("[Fix Undefined Properties] Using fallback getConversations"),Promise.resolve(window.conversations||[])}),void 0===window.getUserFolders&&(window.getUserFolders=function(){return console.log("[Fix Undefined Properties] Using fallback getUserFolders"),Promise.resolve(window.userFolders||[])}),void 0===window.getPrompts&&(window.getPrompts=function(){return console.log("[Fix Undefined Properties] Using fallback getPrompts"),Promise.resolve(window.prompts||[])})}catch(e){console.error("[Fix Undefined Properties] Error initializing window properties:",e)}}(),function(){try{"undefined"!=typeof Storage&&localStorage&&(localStorage.getItem("isPremium")||(localStorage.setItem("isPremium","true"),console.log("[Fix Undefined Properties] Set localStorage.isPremium")),localStorage.getItem("premiumPlan")||(localStorage.setItem("premiumPlan","Premium"),console.log("[Fix Undefined Properties] Set localStorage.premiumPlan")),localStorage.getItem("conversations")||(localStorage.setItem("conversations",JSON.stringify([])),console.log("[Fix Undefined Properties] Set localStorage.conversations")),localStorage.getItem("local_folders")||(localStorage.setItem("local_folders",JSON.stringify([])),console.log("[Fix Undefined Properties] Set localStorage.local_folders")),localStorage.getItem("isResetChatHistory")||(localStorage.setItem("isResetChatHistory","false"),console.log("[Fix Undefined Properties] Set localStorage.isResetChatHistory")))}catch(e){console.error("[Fix Undefined Properties] Error initializing localStorage properties:",e)}}(),function(){try{window;const e={local_folders:[],isResetChatHistory:!1,conversations:[],userFolders:[],prompts:[],isPremium:!0,premiumStatus:{active:!0,plan:"Premium"}};Object.keys(e).forEach(o=>{void 0===window[o]&&Object.defineProperty(window,o,{get:function(){return console.log(`[Fix Undefined Properties] Safe access to ${o}`),e[o]},set:function(i){e[o]=i},configurable:!0,enumerable:!0})})}catch(e){console.error("[Fix Undefined Properties] Error creating safe property access:",e)}}(),function(){const e=window.onerror;window.onerror=function(o,i,n,t,r){if(o&&o.includes("undefined")&&(console.warn("[Fix Undefined Properties] Caught undefined error:",o),o.includes("local_folders")&&(window.local_folders=window.local_folders||[]),o.includes("isResetChatHistory")&&(window.isResetChatHistory=window.isResetChatHistory||!1),o.includes("conversations")&&(window.conversations=window.conversations||[])),e)return e.call(this,o,i,n,t,r)}}(),console.log("[Fix Undefined Properties] All property fixes initialized successfully"),window.undefinedPropertiesFixed=!0;try{window.dispatchEvent(new CustomEvent("undefinedPropertiesFixed",{detail:{timestamp:Date.now()}}))}catch(e){console.log("[Fix Undefined Properties] Could not dispatch event, but fixes are active")}}console.log("[Fix Undefined Properties] Initializing property fixes..."),e(),"loading"===document.readyState&&document.addEventListener("DOMContentLoaded",e),setTimeout(e,100),setTimeout(e,500),setTimeout(e,1e3)}();