{"version":3,"file":"popup.js","mappings":"uBAAIA,E,uCC4OJC,eAAeC,IACb,IACEC,QAAQC,IAAI,+BAGZ,MAAMC,QAAiBC,OAAOC,QAAQC,YAAY,CAAEC,KAAM,cAEtDJ,EAASK,MAcjB,SAA2BA,GACzB,IAEE,MAAMC,EAAgBC,SAASC,eAAe,kBAC1CF,IACED,EAAMI,MAAMC,WACdJ,EAAcK,YAAc,UAC5BL,EAAcM,MAAMC,WAAa,oDACjCP,EAAcM,MAAME,MAAQ,UAE5BR,EAAcK,YAAc,OAC5BL,EAAcM,MAAMC,WAAa,UACjCP,EAAcM,MAAME,MAAQ,SAKhC,MAAMC,EAAaR,SAASC,eAAe,eAC3C,GAAIO,EAAY,CACd,MAAMC,EAAaX,EAAMI,MAAMO,WAAa,MAAQ,KAC9CC,EAAoBZ,EAAMa,eAAeA,eAAeC,QAAU,EAClEC,EAAcf,EAAMa,eAAeG,SAASF,QAAU,EAE5DJ,EAAWO,UAAY,8CACcN,yDACIC,mDACNG,iDACFf,EAAMI,MAAMc,aAAaC,OAAS,sBAErE,CAEA1B,QAAQC,IAAI,0BACd,CAAE,MAAO0B,GACP3B,QAAQ2B,MAAM,oCAAqCA,EACrD,CACF,CAhDMC,CAAkB1B,EAASK,OAE3BsB,EAAiB,wBAGnB7B,QAAQC,IAAI,iBACd,CAAE,MAAO0B,GACP3B,QAAQ2B,MAAM,0BAA2BA,GACzCE,EAAiB,sBACnB,CACF,CAyCA,SAASA,EAAiBC,GACxB,MAAMb,EAAaR,SAASC,eAAe,eACvCO,IACFA,EAAWJ,YAAciB,EAE7B,CAGAhC,eAAeiC,IACb,IACE/B,QAAQC,IAAI,mCACZ4B,EAAiB,gCAGjB,MAAOG,SAAa7B,OAAO8B,KAAKC,MAAM,CAAEC,QAAQ,EAAMC,eAAe,IACjEJ,GAAKK,UACDlC,OAAO8B,KAAK5B,YAAY2B,EAAIK,GAAI,CAAE/B,KAAM,yBAI1C,KAAagC,WAAW,CAAE1B,WAAW,UAGrCb,IAEN8B,EAAiB,6BACjB7B,QAAQC,IAAI,6BACd,CAAE,MAAO0B,GACP3B,QAAQ2B,MAAM,uCAAwCA,GACtDE,EAAiB,oCACnB,CACF,CAEA/B,eAAeyC,IACb,IACEvC,QAAQC,IAAI,4BACZ4B,EAAiB,yBAGjB,MAAOG,SAAa7B,OAAO8B,KAAKC,MAAM,CAAEC,QAAQ,EAAMC,eAAe,IACjEJ,GAAKK,UACDlC,OAAO8B,KAAK5B,YAAY2B,EAAIK,GAAI,CAAE/B,KAAM,qBAGhDuB,EAAiB,sBACjB7B,QAAQC,IAAI,sBACd,CAAE,MAAO0B,GACP3B,QAAQ2B,MAAM,gCAAiCA,GAC/CE,EAAiB,6BACnB,CACF,CAEA/B,eAAe0C,IACb,IACExC,QAAQC,IAAI,kCACZ4B,EAAiB,+BAGjB,MAAM3B,QAAiBC,OAAOC,QAAQC,YAAY,CAChDC,KAAM,cACNmC,QAAS,CAAEC,OAAQ,uBAGjBxC,UACI,KAAayC,oBAAoB,CAAEvB,cAAelB,UAClDH,IACN8B,EAAiB,6BAGnB7B,QAAQC,IAAI,4BACd,CAAE,MAAO0B,GACP3B,QAAQ2B,MAAM,qCAAsCA,GACpDE,EAAiB,kCACnB,CACF,CAEA/B,eAAe8C,IACb,IACE5C,QAAQC,IAAI,uBAEZ,MAAMM,EAAQ,KAAasC,WAC3B7C,QAAQC,IAAI,iBAAkBM,GAE9BsB,EAAiB,0BACnB,CAAE,MAAOF,GACP3B,QAAQ2B,MAAM,yBAA0BA,GACxCE,EAAiB,sBACnB,CACF,CAEA/B,eAAegD,IACb,IACE9C,QAAQC,IAAI,2BACZ4B,EAAiB,6BAEX,KAAakB,cACb,KAAaC,aAEnBnB,EAAiB,oBACjB7B,QAAQC,IAAI,oBACd,CAAE,MAAO0B,GACP3B,QAAQ2B,MAAM,6BAA8BA,GAC5CE,EAAiB,0BACnB,CACF,CAEA,SAASoB,IACPjD,QAAQC,IAAI,0BACZE,OAAO8B,KAAKiB,OAAO,CAAEC,IAAKhD,OAAOC,QAAQgD,OAAO,gBAClD,CAEA,SAASC,IACPrD,QAAQC,IAAI,qBACZE,OAAO8B,KAAKiB,OAAO,CAAEC,IAAK,6CAC5B,CAtZAnD,QAAQC,IAAI,wCAGZQ,SAAS6C,iBAAiB,mBAAoBxD,UAC5C,IACEE,QAAQC,IAAI,kCAkBhBH,iBACE,IACEE,QAAQC,IAAI,6BAGZ,MAAMsD,EAAY9C,SAAS+C,cAAc,OACzCD,EAAUlB,GAAK,wBACfkB,EAAUE,UAAY,cACtBF,EAAUzC,MAAM4C,QAAU,+LAS1B,MAAMC,EAsBV,WACE,MAAMA,EAASlD,SAAS+C,cAAc,OAwBtC,OAvBAG,EAAOF,UAAY,eACnBE,EAAO7C,MAAM4C,QAAU,sLASvBC,EAAOnC,UAAY,8iBAaZmC,CACT,CAhDmBC,GACfL,EAAUM,YAAYF,GAGtB,MAAMG,EA+CV,WACE,MAAMA,EAAUrD,SAAS+C,cAAc,OA4EvC,OA3EAM,EAAQL,UAAY,gBACpBK,EAAQhD,MAAM4C,QAAU,+CAKxBI,EAAQtC,UAAY,i7EAqEbsC,CACT,CA7HoBC,GAChBR,EAAUM,YAAYC,GAGtB,MAAME,EA4HV,WACE,MAAMA,EAASvD,SAAS+C,cAAc,OAkBtC,OAjBAQ,EAAOP,UAAY,eACnBO,EAAOlD,MAAM4C,QAAU,oIAQvBM,EAAOxC,UAAY,oRAQZwC,CACT,CAhJmBC,GACfV,EAAUM,YAAYG,GAGtBvD,SAASyD,KAAK1C,UAAY,GAC1Bf,SAASyD,KAAKL,YAAYN,GAE1BvD,QAAQC,IAAI,qBACd,CAAE,MAAO0B,GACP3B,QAAQ2B,MAAM,+BAAgCA,EAChD,CACF,CAnDUwC,GA4LRnE,QAAQC,IAAI,0CAGZQ,SAASC,eAAe,mBAAmB4C,iBAAiB,QAASvB,GACrEtB,SAASC,eAAe,qBAAqB4C,iBAAiB,QAASf,GACvE9B,SAASC,eAAe,0BAA0B4C,iBAAiB,QAASd,GAG5E/B,SAASC,eAAe,cAAc4C,iBAAiB,QAASV,GAChEnC,SAASC,eAAe,kBAAkB4C,iBAAiB,QAASR,GAGpErC,SAASC,eAAe,kBAAkB4C,iBAAiB,QAASL,GACpExC,SAASC,eAAe,cAAc4C,iBAAiB,QAASD,GAUhD5C,SAAS2D,iBAAiB,2BAElCC,QAAQC,IACdA,EAAOhB,iBAAiB,aAAc,KACnCgB,EAAuBxD,MAAMyD,QAAU,QAG1CD,EAAOhB,iBAAiB,aAAc,KACnCgB,EAAuBxD,MAAMyD,QAAU,QAb5CvE,QAAQC,IAAI,wCAxMJF,IAENC,QAAQC,IAAI,kCACd,CAAE,MAAO0B,GACP3B,QAAQ2B,MAAM,iCAAkCA,EAClD,IAqYF3B,QAAQC,IAAI,mC,GC1ZRuE,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,CAAC,GAOX,OAHAE,EAAoBL,GAAUI,EAAQA,EAAOD,QAASJ,GAG/CK,EAAOD,OACf,CAGAJ,EAAoBO,EAAID,EFzBpBlF,EAAW,GACf4E,EAAoBQ,EAAI,CAACC,EAAQC,EAAUC,EAAIC,KAC9C,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAASC,EAAI,EAAGA,EAAI3F,EAASwB,OAAQmE,IAAK,CAGzC,IAFA,IAAKL,EAAUC,EAAIC,GAAYxF,EAAS2F,GACpCC,GAAY,EACPC,EAAI,EAAGA,EAAIP,EAAS9D,OAAQqE,MACpB,EAAXL,GAAsBC,GAAgBD,IAAaM,OAAOC,KAAKnB,EAAoBQ,GAAGY,MAAOC,GAASrB,EAAoBQ,EAAEa,GAAKX,EAASO,KAC9IP,EAASY,OAAOL,IAAK,IAErBD,GAAY,EACTJ,EAAWC,IAAcA,EAAeD,IAG7C,GAAGI,EAAW,CACb5F,EAASkG,OAAOP,IAAK,GACrB,IAAIQ,EAAIZ,SACER,IAANoB,IAAiBd,EAASc,EAC/B,CACD,CACA,OAAOd,CAnBP,CAJCG,EAAWA,GAAY,EACvB,IAAI,IAAIG,EAAI3F,EAASwB,OAAQmE,EAAI,GAAK3F,EAAS2F,EAAI,GAAG,GAAKH,EAAUG,IAAK3F,EAAS2F,GAAK3F,EAAS2F,EAAI,GACrG3F,EAAS2F,GAAK,CAACL,EAAUC,EAAIC,IGJ/BZ,EAAoBwB,EAAI,CAACpB,EAASqB,KACjC,IAAI,IAAIJ,KAAOI,EACXzB,EAAoB0B,EAAED,EAAYJ,KAASrB,EAAoB0B,EAAEtB,EAASiB,IAC5EH,OAAOS,eAAevB,EAASiB,EAAK,CAAEO,YAAY,EAAMC,IAAKJ,EAAWJ,MCJ3ErB,EAAoB0B,EAAI,CAACI,EAAKC,IAAUb,OAAOc,UAAUC,eAAeC,KAAKJ,EAAKC,G,MCKlF,IAAII,EAAkB,CACrB,IAAK,GAaNnC,EAAoBQ,EAAES,EAAKmB,GAA0C,IAA7BD,EAAgBC,GAGxD,IAAIC,EAAuB,CAACC,EAA4BC,KACvD,IAGItC,EAAUmC,GAHT1B,EAAU8B,EAAa7G,GAAW4G,EAGhBxB,EAAI,EAC3B,GAAGL,EAAS+B,KAAM7E,GAAgC,IAAxBuE,EAAgBvE,IAAa,CACtD,IAAIqC,KAAYuC,EACZxC,EAAoB0B,EAAEc,EAAavC,KACrCD,EAAoBO,EAAEN,GAAYuC,EAAYvC,IAGhD,GAAGtE,EAAS,IAAI8E,EAAS9E,EAAQqE,EAClC,CAEA,IADGsC,GAA4BA,EAA2BC,GACrDxB,EAAIL,EAAS9D,OAAQmE,IACzBqB,EAAU1B,EAASK,GAChBf,EAAoB0B,EAAES,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOpC,EAAoBQ,EAAEC,IAG1BiC,EAAqBC,KAAkC,4BAAIA,KAAkC,6BAAK,GACtGD,EAAmB9C,QAAQyC,EAAqBO,KAAK,KAAM,IAC3DF,EAAmBG,KAAOR,EAAqBO,KAAK,KAAMF,EAAmBG,KAAKD,KAAKF,G,KC7CvF,IAAII,EAAsB9C,EAAoBQ,OAAEL,EAAW,CAAC,KAAM,IAAOH,EAAoB,MAC7F8C,EAAsB9C,EAAoBQ,EAAEsC,E","sources":["webpack://ishka-extension/webpack/runtime/chunk loaded","webpack://ishka-extension/./src/popup/index.ts","webpack://ishka-extension/webpack/bootstrap","webpack://ishka-extension/webpack/runtime/define property getters","webpack://ishka-extension/webpack/runtime/hasOwnProperty shorthand","webpack://ishka-extension/webpack/runtime/jsonp chunk loading","webpack://ishka-extension/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","import { stateManager } from '@shared/state';\nimport { storageUtils } from '@shared/utils';\n\nconsole.log('üéØ Ishka Extension Popup Initialized');\n\n// Initialize popup when DOM is ready\ndocument.addEventListener('DOMContentLoaded', async () => {\n  try {\n    console.log('üöÄ Initializing popup...');\n    \n    // Initialize popup UI\n    await initializePopupUI();\n    \n    // Set up event listeners\n    setupPopupEventListeners();\n    \n    // Load current state\n    await loadCurrentState();\n    \n    console.log('‚úÖ Popup initialization complete');\n  } catch (error) {\n    console.error('‚ùå Popup initialization failed:', error);\n  }\n});\n\n// Initialize popup UI\nasync function initializePopupUI(): Promise<void> {\n  try {\n    console.log('üé® Setting up popup UI...');\n    \n    // Create main container\n    const container = document.createElement('div');\n    container.id = 'ishka-popup-container';\n    container.className = 'ishka-popup';\n    container.style.cssText = `\n      width: 320px;\n      min-height: 400px;\n      padding: 16px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      background: white;\n    `;\n    \n    // Add header\n    const header = createHeader();\n    container.appendChild(header);\n    \n    // Add content sections\n    const content = createContent();\n    container.appendChild(content);\n    \n    // Add footer\n    const footer = createFooter();\n    container.appendChild(footer);\n    \n    // Replace existing content\n    document.body.innerHTML = '';\n    document.body.appendChild(container);\n    \n    console.log('‚úÖ Popup UI created');\n  } catch (error) {\n    console.error('‚ùå Failed to create popup UI:', error);\n  }\n}\n\n// Create header section\nfunction createHeader(): HTMLElement {\n  const header = document.createElement('div');\n  header.className = 'popup-header';\n  header.style.cssText = `\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 16px;\n    padding-bottom: 12px;\n    border-bottom: 1px solid #e5e5e5;\n  `;\n  \n  header.innerHTML = `\n    <div style=\"display: flex; align-items: center; gap: 8px;\">\n      <div style=\"width: 24px; height: 24px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 6px;\"></div>\n      <div>\n        <div style=\"font-weight: 600; font-size: 16px; color: #333;\">Ishka</div>\n        <div style=\"font-size: 12px; color: #666;\">Enhanced ChatGPT</div>\n      </div>\n    </div>\n    <div id=\"premium-status\" style=\"font-size: 12px; padding: 4px 8px; border-radius: 12px; background: #f0f0f0; color: #666;\">\n      Free\n    </div>\n  `;\n  \n  return header;\n}\n\n// Create content section\nfunction createContent(): HTMLElement {\n  const content = document.createElement('div');\n  content.className = 'popup-content';\n  content.style.cssText = `\n    flex: 1;\n    margin-bottom: 16px;\n  `;\n  \n  content.innerHTML = `\n    <div class=\"content-section\">\n      <h3 style=\"margin: 0 0 12px 0; font-size: 14px; font-weight: 600; color: #333;\">Quick Actions</h3>\n      <div class=\"action-buttons\" style=\"display: flex; flex-direction: column; gap: 8px;\">\n        <button id=\"enable-premium\" class=\"action-btn\" style=\"\n          padding: 8px 12px;\n          border: 1px solid #10a37f;\n          background: #10a37f;\n          color: white;\n          border-radius: 6px;\n          font-size: 13px;\n          cursor: pointer;\n          transition: all 0.2s;\n        \">Enable Premium Features</button>\n        <button id=\"update-plan-text\" class=\"action-btn\" style=\"\n          padding: 8px 12px;\n          border: 1px solid #e5e5e5;\n          background: white;\n          color: #333;\n          border-radius: 6px;\n          font-size: 13px;\n          cursor: pointer;\n          transition: all 0.2s;\n        \">Update Plan Text</button>\n        <button id=\"refresh-conversations\" class=\"action-btn\" style=\"\n          padding: 8px 12px;\n          border: 1px solid #e5e5e5;\n          background: white;\n          color: #333;\n          border-radius: 6px;\n          font-size: 13px;\n          cursor: pointer;\n          transition: all 0.2s;\n        \">Refresh Conversations</button>\n      </div>\n    </div>\n    \n    <div class=\"content-section\" style=\"margin-top: 20px;\">\n      <h3 style=\"margin: 0 0 12px 0; font-size: 14px; font-weight: 600; color: #333;\">Status</h3>\n      <div id=\"status-info\" style=\"font-size: 12px; color: #666; line-height: 1.4;\">\n        Loading...\n      </div>\n    </div>\n    \n    <div class=\"content-section\" style=\"margin-top: 20px;\">\n      <h3 style=\"margin: 0 0 12px 0; font-size: 14px; font-weight: 600; color: #333;\">Debug</h3>\n      <div style=\"display: flex; flex-direction: column; gap: 8px;\">\n        <button id=\"get-state\" class=\"debug-btn\" style=\"\n          padding: 6px 10px;\n          border: 1px solid #e5e5e5;\n          background: white;\n          color: #333;\n          border-radius: 4px;\n          font-size: 11px;\n          cursor: pointer;\n        \">Get State</button>\n        <button id=\"clear-storage\" class=\"debug-btn\" style=\"\n          padding: 6px 10px;\n          border: 1px solid #e5e5e5;\n          background: white;\n          color: #333;\n          border-radius: 4px;\n          font-size: 11px;\n          cursor: pointer;\n        \">Clear Storage</button>\n      </div>\n    </div>\n  `;\n  \n  return content;\n}\n\n// Create footer section\nfunction createFooter(): HTMLElement {\n  const footer = document.createElement('div');\n  footer.className = 'popup-footer';\n  footer.style.cssText = `\n    padding-top: 12px;\n    border-top: 1px solid #e5e5e5;\n    font-size: 11px;\n    color: #999;\n    text-align: center;\n  `;\n  \n  footer.innerHTML = `\n    <div>Version 3.9.7</div>\n    <div style=\"margin-top: 4px;\">\n      <a href=\"#\" id=\"open-settings\" style=\"color: #10a37f; text-decoration: none;\">Settings</a> ‚Ä¢ \n      <a href=\"#\" id=\"open-help\" style=\"color: #10a37f; text-decoration: none;\">Help</a>\n    </div>\n  `;\n  \n  return footer;\n}\n\n// Set up popup event listeners\nfunction setupPopupEventListeners(): void {\n  console.log('üéß Setting up popup event listeners...');\n  \n  // Action buttons\n  document.getElementById('enable-premium')?.addEventListener('click', handleEnablePremium);\n  document.getElementById('update-plan-text')?.addEventListener('click', handleUpdatePlanText);\n  document.getElementById('refresh-conversations')?.addEventListener('click', handleRefreshConversations);\n  \n  // Debug buttons\n  document.getElementById('get-state')?.addEventListener('click', handleGetState);\n  document.getElementById('clear-storage')?.addEventListener('click', handleClearStorage);\n  \n  // Footer links\n  document.getElementById('open-settings')?.addEventListener('click', handleOpenSettings);\n  document.getElementById('open-help')?.addEventListener('click', handleOpenHelp);\n  \n  // Add hover effects\n  addHoverEffects();\n  \n  console.log('‚úÖ Popup event listeners set up');\n}\n\n// Add hover effects to buttons\nfunction addHoverEffects(): void {\n  const buttons = document.querySelectorAll('.action-btn, .debug-btn');\n  \n  buttons.forEach(button => {\n    button.addEventListener('mouseenter', () => {\n      (button as HTMLElement).style.opacity = '0.8';\n    });\n    \n    button.addEventListener('mouseleave', () => {\n      (button as HTMLElement).style.opacity = '1';\n    });\n  });\n}\n\n// Load current state\nasync function loadCurrentState(): Promise<void> {\n  try {\n    console.log('üìä Loading current state...');\n    \n    // Get state from background script\n    const response = await chrome.runtime.sendMessage({ type: 'GET_STATE' });\n    \n    if (response.state) {\n      updateUIWithState(response.state);\n    } else {\n      updateStatusInfo('Failed to load state');\n    }\n    \n    console.log('‚úÖ State loaded');\n  } catch (error) {\n    console.error('‚ùå Failed to load state:', error);\n    updateStatusInfo('Error loading state');\n  }\n}\n\n// Update UI with state\nfunction updateUIWithState(state: any): void {\n  try {\n    // Update premium status\n    const premiumStatus = document.getElementById('premium-status');\n    if (premiumStatus) {\n      if (state.user?.isPremium) {\n        premiumStatus.textContent = 'Premium';\n        premiumStatus.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';\n        premiumStatus.style.color = 'white';\n      } else {\n        premiumStatus.textContent = 'Free';\n        premiumStatus.style.background = '#f0f0f0';\n        premiumStatus.style.color = '#666';\n      }\n    }\n    \n    // Update status info\n    const statusInfo = document.getElementById('status-info');\n    if (statusInfo) {\n      const isLoggedIn = state.user?.isLoggedIn ? 'Yes' : 'No';\n      const conversationCount = state.conversations?.conversations?.length || 0;\n      const folderCount = state.conversations?.folders?.length || 0;\n      \n      statusInfo.innerHTML = `\n        <div><strong>Logged In:</strong> ${isLoggedIn}</div>\n        <div><strong>Conversations:</strong> ${conversationCount}</div>\n        <div><strong>Folders:</strong> ${folderCount}</div>\n        <div><strong>Theme:</strong> ${state.user?.preferences?.theme || 'auto'}</div>\n      `;\n    }\n    \n    console.log('‚úÖ UI updated with state');\n  } catch (error) {\n    console.error('‚ùå Failed to update UI with state:', error);\n  }\n}\n\n// Update status info\nfunction updateStatusInfo(message: string): void {\n  const statusInfo = document.getElementById('status-info');\n  if (statusInfo) {\n    statusInfo.textContent = message;\n  }\n}\n\n// Event handlers\nasync function handleEnablePremium(): Promise<void> {\n  try {\n    console.log('üíé Enabling premium features...');\n    updateStatusInfo('Enabling premium features...');\n    \n    // Send message to content script\n    const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });\n    if (tab?.id) {\n      await chrome.tabs.sendMessage(tab.id, { type: 'ENABLE_PREMIUM' });\n    }\n    \n    // Update local state\n    await stateManager.updateUser({ isPremium: true });\n    \n    // Reload state\n    await loadCurrentState();\n    \n    updateStatusInfo('Premium features enabled!');\n    console.log('‚úÖ Premium features enabled');\n  } catch (error) {\n    console.error('‚ùå Failed to enable premium features:', error);\n    updateStatusInfo('Failed to enable premium features');\n  }\n}\n\nasync function handleUpdatePlanText(): Promise<void> {\n  try {\n    console.log('üîÑ Updating plan text...');\n    updateStatusInfo('Updating plan text...');\n    \n    // Send message to content script\n    const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });\n    if (tab?.id) {\n      await chrome.tabs.sendMessage(tab.id, { type: 'UPDATE_PLAN_TEXT' });\n    }\n    \n    updateStatusInfo('Plan text updated!');\n    console.log('‚úÖ Plan text updated');\n  } catch (error) {\n    console.error('‚ùå Failed to update plan text:', error);\n    updateStatusInfo('Failed to update plan text');\n  }\n}\n\nasync function handleRefreshConversations(): Promise<void> {\n  try {\n    console.log('üìö Refreshing conversations...');\n    updateStatusInfo('Refreshing conversations...');\n    \n    // Send API request to get conversations\n    const response = await chrome.runtime.sendMessage({\n      type: 'API_REQUEST',\n      payload: { method: 'GET_CONVERSATIONS' }\n    });\n    \n    if (response) {\n      await stateManager.updateConversations({ conversations: response });\n      await loadCurrentState();\n      updateStatusInfo('Conversations refreshed!');\n    }\n    \n    console.log('‚úÖ Conversations refreshed');\n  } catch (error) {\n    console.error('‚ùå Failed to refresh conversations:', error);\n    updateStatusInfo('Failed to refresh conversations');\n  }\n}\n\nasync function handleGetState(): Promise<void> {\n  try {\n    console.log('üìä Getting state...');\n    \n    const state = stateManager.getState();\n    console.log('Current state:', state);\n    \n    updateStatusInfo('State logged to console');\n  } catch (error) {\n    console.error('‚ùå Failed to get state:', error);\n    updateStatusInfo('Failed to get state');\n  }\n}\n\nasync function handleClearStorage(): Promise<void> {\n  try {\n    console.log('üóëÔ∏è Clearing storage...');\n    updateStatusInfo('Clearing storage...');\n    \n    await storageUtils.clear();\n    await stateManager.resetState();\n    \n    updateStatusInfo('Storage cleared!');\n    console.log('‚úÖ Storage cleared');\n  } catch (error) {\n    console.error('‚ùå Failed to clear storage:', error);\n    updateStatusInfo('Failed to clear storage');\n  }\n}\n\nfunction handleOpenSettings(): void {\n  console.log('‚öôÔ∏è Opening settings...');\n  chrome.tabs.create({ url: chrome.runtime.getURL('manage.html') });\n}\n\nfunction handleOpenHelp(): void {\n  console.log('‚ùì Opening help...');\n  chrome.tabs.create({ url: 'https://github.com/DonQuilatte/ext#readme' });\n}\n\nconsole.log('üéØ Popup script loaded and ready');","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t887: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkishka_extension\"] = self[\"webpackChunkishka_extension\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [804], () => (__webpack_require__(549)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","async","loadCurrentState","console","log","response","chrome","runtime","sendMessage","type","state","premiumStatus","document","getElementById","user","isPremium","textContent","style","background","color","statusInfo","isLoggedIn","conversationCount","conversations","length","folderCount","folders","innerHTML","preferences","theme","error","updateUIWithState","updateStatusInfo","message","handleEnablePremium","tab","tabs","query","active","currentWindow","id","updateUser","handleUpdatePlanText","handleRefreshConversations","payload","method","updateConversations","handleGetState","getState","handleClearStorage","clear","resetState","handleOpenSettings","create","url","getURL","handleOpenHelp","addEventListener","container","createElement","className","cssText","header","createHeader","appendChild","content","createContent","footer","createFooter","body","initializePopupUI","querySelectorAll","forEach","button","opacity","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","Object","keys","every","key","splice","r","d","definition","o","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","some","chunkLoadingGlobal","self","bind","push","__webpack_exports__"],"sourceRoot":""}