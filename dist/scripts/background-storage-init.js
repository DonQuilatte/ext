async function initializeBackgroundStorage(){if("undefined"==typeof chrome||!chrome.storage)return void console.warn("Chrome storage API not available in background");const e={isResetChatHistory:!1,local_folders:[],local_prompts:[],local_chains:[],local_pinned:[],local_announcements:[],local_user_data:{isPaid:!0,accountId:"local-user"},store:{selectedItems:[],selectedManageTabsItem:"ACTIVE_CHATS",selectedModalType:void 0,sidebarClickListenerAdded:!1,folders:[],selectedFolder:void 0,injectedTabs:!1,prompts:[],chains:[],pinnedChats:{},pinnedFolders:{},direction:"ltr",GPTs:[],sharedGPTs:[]}};try{const o=await chrome.storage.local.get(null),t={};for(const[a,s]of Object.entries(e))a in o&&void 0!==o[a]&&null!==o[a]||(t[a]=s);Object.keys(t).length>0&&(await chrome.storage.local.set(t),console.log("ðŸ”§ BACKGROUND STORAGE: Initialized missing storage keys:",Object.keys(t)))}catch(e){console.error("ðŸš¨ BACKGROUND STORAGE: Failed to initialize storage:",e)}}function safeGetIsResetChatHistory(){return chrome.storage.local.get("isResetChatHistory").then(e=>!(!e||void 0===e.isResetChatHistory)&&e.isResetChatHistory).catch(e=>(console.warn("ðŸš¨ BACKGROUND STORAGE: Failed to get isResetChatHistory:",e),!1))}function safeGetLocalFolders(){return chrome.storage.local.get("local_folders").then(e=>e&&void 0!==e.local_folders?e.local_folders:[]).catch(e=>(console.warn("ðŸš¨ BACKGROUND STORAGE: Failed to get local_folders:",e),[]))}"undefined"!=typeof globalThis&&(globalThis.safeGetIsResetChatHistory=safeGetIsResetChatHistory,globalThis.safeGetLocalFolders=safeGetLocalFolders,globalThis.initializeBackgroundStorage=initializeBackgroundStorage),initializeBackgroundStorage(),console.log("ðŸ”§ BACKGROUND STORAGE: Initialization script loaded");