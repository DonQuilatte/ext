/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/background/index.ts":
/*!*********************************!*\
  !*** ./src/background/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _shared_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @shared/state */ \"./src/shared/state/index.ts\");\n/* harmony import */ var _shared_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @shared/api */ \"./src/shared/api/index.ts\");\n/* harmony import */ var _shared_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @shared/utils */ \"./src/shared/utils/index.ts\");\n\n\n\nconsole.log('üöÄ Ishka Extension Background Script Initialized');\nchrome.runtime.onInstalled.addListener(async (details) => {\n    console.log('Extension installed/updated:', details.reason);\n    if (details.reason === 'install') {\n        await _shared_state__WEBPACK_IMPORTED_MODULE_0__.stateManager.resetState();\n        console.log('‚úÖ Initial state set up');\n    }\n    if (details.reason === 'update') {\n        console.log('üîÑ Extension updated, checking for data migration...');\n        await handleUpdate();\n    }\n});\nchrome.runtime.onStartup.addListener(async () => {\n    console.log('üîÑ Extension starting up...');\n    await initializeExtension();\n});\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n    console.log('üì® Received message:', message);\n    handleMessage(message, sender)\n        .then(sendResponse)\n        .catch((error) => {\n        console.error('‚ùå Error handling message:', error);\n        sendResponse({ error: error.message });\n    });\n    return true;\n});\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\n    if (changeInfo.status === 'complete' && tab.url?.includes('chatgpt.com')) {\n        console.log('üìÑ ChatGPT page loaded, injecting content script');\n        injectContentScript(tabId);\n    }\n});\nchrome.storage.onChanged.addListener((changes, namespace) => {\n    console.log('üíæ Storage changed:', changes, namespace);\n    Object.entries(changes).forEach(([key, change]) => {\n        if (change.newValue !== undefined) {\n            _shared_state__WEBPACK_IMPORTED_MODULE_0__.stateManager.setState({ [key]: change.newValue });\n        }\n    });\n});\nasync function handleMessage(message, sender) {\n    const { type, payload } = message;\n    switch (type) {\n        case 'GET_STATE':\n            return { state: _shared_state__WEBPACK_IMPORTED_MODULE_0__.stateManager.getState() };\n        case 'SET_STATE':\n            await _shared_state__WEBPACK_IMPORTED_MODULE_0__.stateManager.setState(payload);\n            return { success: true };\n        case 'API_REQUEST':\n            return await handleAPIRequest(payload);\n        case 'GET_STORAGE':\n            return await _shared_utils__WEBPACK_IMPORTED_MODULE_2__.storageUtils.get(payload.key);\n        case 'SET_STORAGE':\n            await _shared_utils__WEBPACK_IMPORTED_MODULE_2__.storageUtils.set(payload.key, payload.value);\n            return { success: true };\n        case 'CLEAR_STORAGE':\n            await _shared_utils__WEBPACK_IMPORTED_MODULE_2__.storageUtils.clear();\n            return { success: true };\n        case 'GET_EXTENSION_INFO':\n            return {\n                version: chrome.runtime.getManifest().version,\n                name: chrome.runtime.getManifest().name,\n                id: chrome.runtime.id,\n            };\n        default:\n            throw new Error(`Unknown message type: ${type}`);\n    }\n}\nasync function handleAPIRequest(payload) {\n    const { method, endpoint, data } = payload;\n    try {\n        switch (method) {\n            case 'GET_CONVERSATIONS':\n                return await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.getConversations();\n            case 'GET_CONVERSATION':\n                return await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.getConversation(data.id);\n            case 'CREATE_CONVERSATION':\n                return await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.createConversation(data.title);\n            case 'UPDATE_CONVERSATION':\n                return await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.updateConversation(data.id, data.updates);\n            case 'DELETE_CONVERSATION':\n                await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.deleteConversation(data.id);\n                return { success: true };\n            case 'GET_FOLDERS':\n                return await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.getFolders();\n            case 'CREATE_FOLDER':\n                return await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.createFolder(data.name, data.color);\n            case 'UPDATE_FOLDER':\n                return await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.updateFolder(data.id, data.updates);\n            case 'DELETE_FOLDER':\n                await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.deleteFolder(data.id);\n                return { success: true };\n            case 'GET_PROMPTS':\n                return await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.getPrompts();\n            case 'CREATE_PROMPT':\n                return await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.createPrompt(data.prompt);\n            case 'UPDATE_PROMPT':\n                return await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.updatePrompt(data.id, data.updates);\n            case 'DELETE_PROMPT':\n                await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.deletePrompt(data.id);\n                return { success: true };\n            default:\n                throw new Error(`Unknown API method: ${method}`);\n        }\n    }\n    catch (error) {\n        console.error('API request failed:', error);\n        throw error;\n    }\n}\nasync function injectContentScript(tabId) {\n    try {\n        await chrome.scripting.executeScript({\n            target: { tabId },\n            files: ['content.js'],\n        });\n        console.log('‚úÖ Content script injected');\n    }\n    catch (error) {\n        console.error('‚ùå Failed to inject content script:', error);\n    }\n}\nasync function initializeExtension() {\n    try {\n        const conversations = await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.getConversations();\n        const folders = await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.getFolders();\n        const prompts = await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.getPrompts();\n        await _shared_state__WEBPACK_IMPORTED_MODULE_0__.stateManager.setState({\n            conversations: {\n                conversations,\n                folders,\n                isLoading: false,\n            },\n        });\n        console.log('‚úÖ Extension initialized successfully');\n    }\n    catch (error) {\n        console.error('‚ùå Failed to initialize extension:', error);\n    }\n}\nasync function handleUpdate() {\n    try {\n        const currentVersion = chrome.runtime.getManifest().version;\n        const storedVersion = await _shared_utils__WEBPACK_IMPORTED_MODULE_2__.storageUtils.get('extension_version');\n        if (storedVersion !== currentVersion) {\n            console.log(`üîÑ Migrating from ${storedVersion} to ${currentVersion}`);\n            await _shared_utils__WEBPACK_IMPORTED_MODULE_2__.storageUtils.set('extension_version', currentVersion);\n            console.log('‚úÖ Migration completed');\n        }\n    }\n    catch (error) {\n        console.error('‚ùå Migration failed:', error);\n    }\n}\nsetInterval(async () => {\n    try {\n        const state = _shared_state__WEBPACK_IMPORTED_MODULE_0__.stateManager.getState();\n        if (state.user.preferences.autoSave) {\n            const conversations = await _shared_api__WEBPACK_IMPORTED_MODULE_1__.apiClient.getConversations();\n            await _shared_state__WEBPACK_IMPORTED_MODULE_0__.stateManager.updateConversations({ conversations });\n        }\n    }\n    catch (error) {\n        console.error('‚ùå Periodic task failed:', error);\n    }\n}, 30000);\nconsole.log('‚úÖ Background script setup complete');\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYmFja2dyb3VuZC9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQTZDO0FBQ0w7QUFDSztBQUU3QyxPQUFPLENBQUMsR0FBRyxDQUFDLGtEQUFrRCxDQUFDLENBQUM7QUFHaEUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsRUFBRTtJQUN2RCxPQUFPLENBQUMsR0FBRyxDQUFDLDhCQUE4QixFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUU1RCxJQUFJLE9BQU8sQ0FBQyxNQUFNLEtBQUssU0FBUyxFQUFFLENBQUM7UUFFakMsTUFBTSx1REFBWSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRUQsSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLFFBQVEsRUFBRSxDQUFDO1FBRWhDLE9BQU8sQ0FBQyxHQUFHLENBQUMsc0RBQXNELENBQUMsQ0FBQztRQUNwRSxNQUFNLFlBQVksRUFBRSxDQUFDO0lBQ3ZCLENBQUM7QUFDSCxDQUFDLENBQUMsQ0FBQztBQUdILE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxLQUFLLElBQUksRUFBRTtJQUM5QyxPQUFPLENBQUMsR0FBRyxDQUFDLDZCQUE2QixDQUFDLENBQUM7SUFDM0MsTUFBTSxtQkFBbUIsRUFBRSxDQUFDO0FBQzlCLENBQUMsQ0FBQyxDQUFDO0FBR0gsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsRUFBRTtJQUNyRSxPQUFPLENBQUMsR0FBRyxDQUFDLHNCQUFzQixFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBRTdDLGFBQWEsQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDO1NBQzNCLElBQUksQ0FBQyxZQUFZLENBQUM7U0FDbEIsS0FBSyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUU7UUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLDJCQUEyQixFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ2xELFlBQVksQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUN6QyxDQUFDLENBQUMsQ0FBQztJQUVMLE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQyxDQUFDLENBQUM7QUFHSCxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxFQUFFO0lBQzNELElBQUksVUFBVSxDQUFDLE1BQU0sS0FBSyxVQUFVLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQztRQUN6RSxPQUFPLENBQUMsR0FBRyxDQUFDLGtEQUFrRCxDQUFDLENBQUM7UUFDaEUsbUJBQW1CLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDN0IsQ0FBQztBQUNILENBQUMsQ0FBQyxDQUFDO0FBR0gsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxFQUFFLFNBQVMsRUFBRSxFQUFFO0lBQzFELE9BQU8sQ0FBQyxHQUFHLENBQUMscUJBQXFCLEVBQUUsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBR3ZELE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRTtRQUNoRCxJQUFJLE1BQU0sQ0FBQyxRQUFRLEtBQUssU0FBUyxFQUFFLENBQUM7WUFDbEMsdURBQVksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQ3BELENBQUM7SUFDSCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBR0gsS0FBSyxVQUFVLGFBQWEsQ0FBQyxPQUFZLEVBQUUsTUFBb0M7SUFDN0UsTUFBTSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsR0FBRyxPQUFPLENBQUM7SUFFbEMsUUFBUSxJQUFJLEVBQUUsQ0FBQztRQUNiLEtBQUssV0FBVztZQUNkLE9BQU8sRUFBRSxLQUFLLEVBQUUsdURBQVksQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDO1FBRTVDLEtBQUssV0FBVztZQUNkLE1BQU0sdURBQVksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDckMsT0FBTyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQztRQUUzQixLQUFLLGFBQWE7WUFDaEIsT0FBTyxNQUFNLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRXpDLEtBQUssYUFBYTtZQUNoQixPQUFPLE1BQU0sdURBQVksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRTdDLEtBQUssYUFBYTtZQUNoQixNQUFNLHVEQUFZLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ25ELE9BQU8sRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUM7UUFFM0IsS0FBSyxlQUFlO1lBQ2xCLE1BQU0sdURBQVksQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUMzQixPQUFPLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDO1FBRTNCLEtBQUssb0JBQW9CO1lBQ3ZCLE9BQU87Z0JBQ0wsT0FBTyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTztnQkFDN0MsSUFBSSxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUMsSUFBSTtnQkFDdkMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRTthQUN0QixDQUFDO1FBRUo7WUFDRSxNQUFNLElBQUksS0FBSyxDQUFDLHlCQUF5QixJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQ3JELENBQUM7QUFDSCxDQUFDO0FBR0QsS0FBSyxVQUFVLGdCQUFnQixDQUFDLE9BQVk7SUFDMUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDO0lBRTNDLElBQUksQ0FBQztRQUNILFFBQVEsTUFBTSxFQUFFLENBQUM7WUFDZixLQUFLLG1CQUFtQjtnQkFDdEIsT0FBTyxNQUFNLGtEQUFTLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUU1QyxLQUFLLGtCQUFrQjtnQkFDckIsT0FBTyxNQUFNLGtEQUFTLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUVsRCxLQUFLLHFCQUFxQjtnQkFDeEIsT0FBTyxNQUFNLGtEQUFTLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXhELEtBQUsscUJBQXFCO2dCQUN4QixPQUFPLE1BQU0sa0RBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUVuRSxLQUFLLHFCQUFxQjtnQkFDeEIsTUFBTSxrREFBUyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDNUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQztZQUUzQixLQUFLLGFBQWE7Z0JBQ2hCLE9BQU8sTUFBTSxrREFBUyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBRXRDLEtBQUssZUFBZTtnQkFDbEIsT0FBTyxNQUFNLGtEQUFTLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRTdELEtBQUssZUFBZTtnQkFDbEIsT0FBTyxNQUFNLGtEQUFTLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRTdELEtBQUssZUFBZTtnQkFDbEIsTUFBTSxrREFBUyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ3RDLE9BQU8sRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUM7WUFFM0IsS0FBSyxhQUFhO2dCQUNoQixPQUFPLE1BQU0sa0RBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUV0QyxLQUFLLGVBQWU7Z0JBQ2xCLE9BQU8sTUFBTSxrREFBUyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFFbkQsS0FBSyxlQUFlO2dCQUNsQixPQUFPLE1BQU0sa0RBQVMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFN0QsS0FBSyxlQUFlO2dCQUNsQixNQUFNLGtEQUFTLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDdEMsT0FBTyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQztZQUUzQjtnQkFDRSxNQUFNLElBQUksS0FBSyxDQUFDLHVCQUF1QixNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBQ3JELENBQUM7SUFDSCxDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMscUJBQXFCLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDNUMsTUFBTSxLQUFLLENBQUM7SUFDZCxDQUFDO0FBQ0gsQ0FBQztBQUdELEtBQUssVUFBVSxtQkFBbUIsQ0FBQyxLQUFhO0lBQzlDLElBQUksQ0FBQztRQUNILE1BQU0sTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUM7WUFDbkMsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFO1lBQ2pCLEtBQUssRUFBRSxDQUFDLFlBQVksQ0FBQztTQUN0QixDQUFDLENBQUM7UUFDSCxPQUFPLENBQUMsR0FBRyxDQUFDLDJCQUEyQixDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7UUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLG9DQUFvQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzdELENBQUM7QUFDSCxDQUFDO0FBR0QsS0FBSyxVQUFVLG1CQUFtQjtJQUNoQyxJQUFJLENBQUM7UUFFSCxNQUFNLGFBQWEsR0FBRyxNQUFNLGtEQUFTLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUN6RCxNQUFNLE9BQU8sR0FBRyxNQUFNLGtEQUFTLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDN0MsTUFBTSxPQUFPLEdBQUcsTUFBTSxrREFBUyxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBRzdDLE1BQU0sdURBQVksQ0FBQyxRQUFRLENBQUM7WUFDMUIsYUFBYSxFQUFFO2dCQUNiLGFBQWE7Z0JBQ2IsT0FBTztnQkFDUCxTQUFTLEVBQUUsS0FBSzthQUNqQjtTQUNGLENBQUMsQ0FBQztRQUVILE9BQU8sQ0FBQyxHQUFHLENBQUMsc0NBQXNDLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsbUNBQW1DLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDNUQsQ0FBQztBQUNILENBQUM7QUFHRCxLQUFLLFVBQVUsWUFBWTtJQUN6QixJQUFJLENBQUM7UUFFSCxNQUFNLGNBQWMsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDLE9BQU8sQ0FBQztRQUM1RCxNQUFNLGFBQWEsR0FBRyxNQUFNLHVEQUFZLENBQUMsR0FBRyxDQUFTLG1CQUFtQixDQUFDLENBQUM7UUFFMUUsSUFBSSxhQUFhLEtBQUssY0FBYyxFQUFFLENBQUM7WUFDckMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsYUFBYSxPQUFPLGNBQWMsRUFBRSxDQUFDLENBQUM7WUFLdkUsTUFBTSx1REFBWSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxjQUFjLENBQUMsQ0FBQztZQUM1RCxPQUFPLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLENBQUM7UUFDdkMsQ0FBQztJQUNILENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUM5QyxDQUFDO0FBQ0gsQ0FBQztBQUdELFdBQVcsQ0FBQyxLQUFLLElBQUksRUFBRTtJQUNyQixJQUFJLENBQUM7UUFFSCxNQUFNLEtBQUssR0FBRyx1REFBWSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3RDLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDcEMsTUFBTSxhQUFhLEdBQUcsTUFBTSxrREFBUyxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDekQsTUFBTSx1REFBWSxDQUFDLG1CQUFtQixDQUFDLEVBQUUsYUFBYSxFQUFFLENBQUMsQ0FBQztRQUM1RCxDQUFDO0lBQ0gsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7UUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLHlCQUF5QixFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ2xELENBQUM7QUFDSCxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFFVixPQUFPLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pc2hrYS1leHRlbnNpb24vLi9zcmMvYmFja2dyb3VuZC9pbmRleC50cz82N2I1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0YXRlTWFuYWdlciB9IGZyb20gJ0BzaGFyZWQvc3RhdGUnO1xuaW1wb3J0IHsgYXBpQ2xpZW50IH0gZnJvbSAnQHNoYXJlZC9hcGknO1xuaW1wb3J0IHsgc3RvcmFnZVV0aWxzIH0gZnJvbSAnQHNoYXJlZC91dGlscyc7XG5cbmNvbnNvbGUubG9nKCfwn5qAIElzaGthIEV4dGVuc2lvbiBCYWNrZ3JvdW5kIFNjcmlwdCBJbml0aWFsaXplZCcpO1xuXG4vLyBJbml0aWFsaXplIGV4dGVuc2lvbiB3aGVuIGluc3RhbGxlZFxuY2hyb21lLnJ1bnRpbWUub25JbnN0YWxsZWQuYWRkTGlzdGVuZXIoYXN5bmMgKGRldGFpbHMpID0+IHtcbiAgY29uc29sZS5sb2coJ0V4dGVuc2lvbiBpbnN0YWxsZWQvdXBkYXRlZDonLCBkZXRhaWxzLnJlYXNvbik7XG4gIFxuICBpZiAoZGV0YWlscy5yZWFzb24gPT09ICdpbnN0YWxsJykge1xuICAgIC8vIFNldCB1cCBpbml0aWFsIHN0YXRlXG4gICAgYXdhaXQgc3RhdGVNYW5hZ2VyLnJlc2V0U3RhdGUoKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIEluaXRpYWwgc3RhdGUgc2V0IHVwJyk7XG4gIH1cbiAgXG4gIGlmIChkZXRhaWxzLnJlYXNvbiA9PT0gJ3VwZGF0ZScpIHtcbiAgICAvLyBIYW5kbGUgdXBkYXRlc1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIEV4dGVuc2lvbiB1cGRhdGVkLCBjaGVja2luZyBmb3IgZGF0YSBtaWdyYXRpb24uLi4nKTtcbiAgICBhd2FpdCBoYW5kbGVVcGRhdGUoKTtcbiAgfVxufSk7XG5cbi8vIEhhbmRsZSBleHRlbnNpb24gc3RhcnR1cFxuY2hyb21lLnJ1bnRpbWUub25TdGFydHVwLmFkZExpc3RlbmVyKGFzeW5jICgpID0+IHtcbiAgY29uc29sZS5sb2coJ/CflIQgRXh0ZW5zaW9uIHN0YXJ0aW5nIHVwLi4uJyk7XG4gIGF3YWl0IGluaXRpYWxpemVFeHRlbnNpb24oKTtcbn0pO1xuXG4vLyBIYW5kbGUgbWVzc2FnZXMgZnJvbSBjb250ZW50IHNjcmlwdHMgYW5kIHBvcHVwXG5jaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoKG1lc3NhZ2UsIHNlbmRlciwgc2VuZFJlc3BvbnNlKSA9PiB7XG4gIGNvbnNvbGUubG9nKCfwn5OoIFJlY2VpdmVkIG1lc3NhZ2U6JywgbWVzc2FnZSk7XG4gIFxuICBoYW5kbGVNZXNzYWdlKG1lc3NhZ2UsIHNlbmRlcilcbiAgICAudGhlbihzZW5kUmVzcG9uc2UpXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGhhbmRsaW5nIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgc2VuZFJlc3BvbnNlKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfSk7XG4gIFxuICByZXR1cm4gdHJ1ZTsgLy8gS2VlcCBtZXNzYWdlIGNoYW5uZWwgb3BlbiBmb3IgYXN5bmMgcmVzcG9uc2Vcbn0pO1xuXG4vLyBIYW5kbGUgdGFiIHVwZGF0ZXNcbmNocm9tZS50YWJzLm9uVXBkYXRlZC5hZGRMaXN0ZW5lcigodGFiSWQsIGNoYW5nZUluZm8sIHRhYikgPT4ge1xuICBpZiAoY2hhbmdlSW5mby5zdGF0dXMgPT09ICdjb21wbGV0ZScgJiYgdGFiLnVybD8uaW5jbHVkZXMoJ2NoYXRncHQuY29tJykpIHtcbiAgICBjb25zb2xlLmxvZygn8J+ThCBDaGF0R1BUIHBhZ2UgbG9hZGVkLCBpbmplY3RpbmcgY29udGVudCBzY3JpcHQnKTtcbiAgICBpbmplY3RDb250ZW50U2NyaXB0KHRhYklkKTtcbiAgfVxufSk7XG5cbi8vIEhhbmRsZSBzdG9yYWdlIGNoYW5nZXNcbmNocm9tZS5zdG9yYWdlLm9uQ2hhbmdlZC5hZGRMaXN0ZW5lcigoY2hhbmdlcywgbmFtZXNwYWNlKSA9PiB7XG4gIGNvbnNvbGUubG9nKCfwn5K+IFN0b3JhZ2UgY2hhbmdlZDonLCBjaGFuZ2VzLCBuYW1lc3BhY2UpO1xuICBcbiAgLy8gVXBkYXRlIHN0YXRlIG1hbmFnZXIgd2l0aCBzdG9yYWdlIGNoYW5nZXNcbiAgT2JqZWN0LmVudHJpZXMoY2hhbmdlcykuZm9yRWFjaCgoW2tleSwgY2hhbmdlXSkgPT4ge1xuICAgIGlmIChjaGFuZ2UubmV3VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgc3RhdGVNYW5hZ2VyLnNldFN0YXRlKHsgW2tleV06IGNoYW5nZS5uZXdWYWx1ZSB9KTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbi8vIE1lc3NhZ2UgaGFuZGxlclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlTWVzc2FnZShtZXNzYWdlOiBhbnksIHNlbmRlcjogY2hyb21lLnJ1bnRpbWUuTWVzc2FnZVNlbmRlcik6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IHsgdHlwZSwgcGF5bG9hZCB9ID0gbWVzc2FnZTtcbiAgXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ0dFVF9TVEFURSc6XG4gICAgICByZXR1cm4geyBzdGF0ZTogc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCkgfTtcbiAgICAgIFxuICAgIGNhc2UgJ1NFVF9TVEFURSc6XG4gICAgICBhd2FpdCBzdGF0ZU1hbmFnZXIuc2V0U3RhdGUocGF5bG9hZCk7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgICBcbiAgICBjYXNlICdBUElfUkVRVUVTVCc6XG4gICAgICByZXR1cm4gYXdhaXQgaGFuZGxlQVBJUmVxdWVzdChwYXlsb2FkKTtcbiAgICAgIFxuICAgIGNhc2UgJ0dFVF9TVE9SQUdFJzpcbiAgICAgIHJldHVybiBhd2FpdCBzdG9yYWdlVXRpbHMuZ2V0KHBheWxvYWQua2V5KTtcbiAgICAgIFxuICAgIGNhc2UgJ1NFVF9TVE9SQUdFJzpcbiAgICAgIGF3YWl0IHN0b3JhZ2VVdGlscy5zZXQocGF5bG9hZC5rZXksIHBheWxvYWQudmFsdWUpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICAgICAgXG4gICAgY2FzZSAnQ0xFQVJfU1RPUkFHRSc6XG4gICAgICBhd2FpdCBzdG9yYWdlVXRpbHMuY2xlYXIoKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICAgIFxuICAgIGNhc2UgJ0dFVF9FWFRFTlNJT05fSU5GTyc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2ZXJzaW9uOiBjaHJvbWUucnVudGltZS5nZXRNYW5pZmVzdCgpLnZlcnNpb24sXG4gICAgICAgIG5hbWU6IGNocm9tZS5ydW50aW1lLmdldE1hbmlmZXN0KCkubmFtZSxcbiAgICAgICAgaWQ6IGNocm9tZS5ydW50aW1lLmlkLFxuICAgICAgfTtcbiAgICAgIFxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gbWVzc2FnZSB0eXBlOiAke3R5cGV9YCk7XG4gIH1cbn1cblxuLy8gQVBJIHJlcXVlc3QgaGFuZGxlclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlQVBJUmVxdWVzdChwYXlsb2FkOiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCB7IG1ldGhvZCwgZW5kcG9pbnQsIGRhdGEgfSA9IHBheWxvYWQ7XG4gIFxuICB0cnkge1xuICAgIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgICBjYXNlICdHRVRfQ09OVkVSU0FUSU9OUyc6XG4gICAgICAgIHJldHVybiBhd2FpdCBhcGlDbGllbnQuZ2V0Q29udmVyc2F0aW9ucygpO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ0dFVF9DT05WRVJTQVRJT04nOlxuICAgICAgICByZXR1cm4gYXdhaXQgYXBpQ2xpZW50LmdldENvbnZlcnNhdGlvbihkYXRhLmlkKTtcbiAgICAgICAgXG4gICAgICBjYXNlICdDUkVBVEVfQ09OVkVSU0FUSU9OJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IGFwaUNsaWVudC5jcmVhdGVDb252ZXJzYXRpb24oZGF0YS50aXRsZSk7XG4gICAgICAgIFxuICAgICAgY2FzZSAnVVBEQVRFX0NPTlZFUlNBVElPTic6XG4gICAgICAgIHJldHVybiBhd2FpdCBhcGlDbGllbnQudXBkYXRlQ29udmVyc2F0aW9uKGRhdGEuaWQsIGRhdGEudXBkYXRlcyk7XG4gICAgICAgIFxuICAgICAgY2FzZSAnREVMRVRFX0NPTlZFUlNBVElPTic6XG4gICAgICAgIGF3YWl0IGFwaUNsaWVudC5kZWxldGVDb252ZXJzYXRpb24oZGF0YS5pZCk7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICAgICAgXG4gICAgICBjYXNlICdHRVRfRk9MREVSUyc6XG4gICAgICAgIHJldHVybiBhd2FpdCBhcGlDbGllbnQuZ2V0Rm9sZGVycygpO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ0NSRUFURV9GT0xERVInOlxuICAgICAgICByZXR1cm4gYXdhaXQgYXBpQ2xpZW50LmNyZWF0ZUZvbGRlcihkYXRhLm5hbWUsIGRhdGEuY29sb3IpO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ1VQREFURV9GT0xERVInOlxuICAgICAgICByZXR1cm4gYXdhaXQgYXBpQ2xpZW50LnVwZGF0ZUZvbGRlcihkYXRhLmlkLCBkYXRhLnVwZGF0ZXMpO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ0RFTEVURV9GT0xERVInOlxuICAgICAgICBhd2FpdCBhcGlDbGllbnQuZGVsZXRlRm9sZGVyKGRhdGEuaWQpO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgICAgIFxuICAgICAgY2FzZSAnR0VUX1BST01QVFMnOlxuICAgICAgICByZXR1cm4gYXdhaXQgYXBpQ2xpZW50LmdldFByb21wdHMoKTtcbiAgICAgICAgXG4gICAgICBjYXNlICdDUkVBVEVfUFJPTVBUJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IGFwaUNsaWVudC5jcmVhdGVQcm9tcHQoZGF0YS5wcm9tcHQpO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ1VQREFURV9QUk9NUFQnOlxuICAgICAgICByZXR1cm4gYXdhaXQgYXBpQ2xpZW50LnVwZGF0ZVByb21wdChkYXRhLmlkLCBkYXRhLnVwZGF0ZXMpO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ0RFTEVURV9QUk9NUFQnOlxuICAgICAgICBhd2FpdCBhcGlDbGllbnQuZGVsZXRlUHJvbXB0KGRhdGEuaWQpO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgICAgIFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIEFQSSBtZXRob2Q6ICR7bWV0aG9kfWApO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBUEkgcmVxdWVzdCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIEluamVjdCBjb250ZW50IHNjcmlwdCBpbnRvIHRhYlxuYXN5bmMgZnVuY3Rpb24gaW5qZWN0Q29udGVudFNjcmlwdCh0YWJJZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgY2hyb21lLnNjcmlwdGluZy5leGVjdXRlU2NyaXB0KHtcbiAgICAgIHRhcmdldDogeyB0YWJJZCB9LFxuICAgICAgZmlsZXM6IFsnY29udGVudC5qcyddLFxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCfinIUgQ29udGVudCBzY3JpcHQgaW5qZWN0ZWQnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGluamVjdCBjb250ZW50IHNjcmlwdDonLCBlcnJvcik7XG4gIH1cbn1cblxuLy8gSW5pdGlhbGl6ZSBleHRlbnNpb25cbmFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVFeHRlbnNpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgLy8gTG9hZCBpbml0aWFsIGRhdGFcbiAgICBjb25zdCBjb252ZXJzYXRpb25zID0gYXdhaXQgYXBpQ2xpZW50LmdldENvbnZlcnNhdGlvbnMoKTtcbiAgICBjb25zdCBmb2xkZXJzID0gYXdhaXQgYXBpQ2xpZW50LmdldEZvbGRlcnMoKTtcbiAgICBjb25zdCBwcm9tcHRzID0gYXdhaXQgYXBpQ2xpZW50LmdldFByb21wdHMoKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgc3RhdGVcbiAgICBhd2FpdCBzdGF0ZU1hbmFnZXIuc2V0U3RhdGUoe1xuICAgICAgY29udmVyc2F0aW9uczoge1xuICAgICAgICBjb252ZXJzYXRpb25zLFxuICAgICAgICBmb2xkZXJzLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn4pyFIEV4dGVuc2lvbiBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGluaXRpYWxpemUgZXh0ZW5zaW9uOicsIGVycm9yKTtcbiAgfVxufVxuXG4vLyBIYW5kbGUgZXh0ZW5zaW9uIHVwZGF0ZXNcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICAvLyBDaGVjayBmb3IgZGF0YSBtaWdyYXRpb24gbmVlZHNcbiAgICBjb25zdCBjdXJyZW50VmVyc2lvbiA9IGNocm9tZS5ydW50aW1lLmdldE1hbmlmZXN0KCkudmVyc2lvbjtcbiAgICBjb25zdCBzdG9yZWRWZXJzaW9uID0gYXdhaXQgc3RvcmFnZVV0aWxzLmdldDxzdHJpbmc+KCdleHRlbnNpb25fdmVyc2lvbicpO1xuICAgIFxuICAgIGlmIChzdG9yZWRWZXJzaW9uICE9PSBjdXJyZW50VmVyc2lvbikge1xuICAgICAgY29uc29sZS5sb2coYPCflIQgTWlncmF0aW5nIGZyb20gJHtzdG9yZWRWZXJzaW9ufSB0byAke2N1cnJlbnRWZXJzaW9ufWApO1xuICAgICAgXG4gICAgICAvLyBQZXJmb3JtIGFueSBuZWNlc3NhcnkgZGF0YSBtaWdyYXRpb25zIGhlcmVcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHN0b3JlZCB2ZXJzaW9uXG4gICAgICBhd2FpdCBzdG9yYWdlVXRpbHMuc2V0KCdleHRlbnNpb25fdmVyc2lvbicsIGN1cnJlbnRWZXJzaW9uKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgTWlncmF0aW9uIGNvbXBsZXRlZCcpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgTWlncmF0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gIH1cbn1cblxuLy8gU2V0IHVwIHBlcmlvZGljIHRhc2tzXG5zZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gQXV0by1zYXZlIGNvbnZlcnNhdGlvbnMgaWYgZW5hYmxlZFxuICAgIGNvbnN0IHN0YXRlID0gc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCk7XG4gICAgaWYgKHN0YXRlLnVzZXIucHJlZmVyZW5jZXMuYXV0b1NhdmUpIHtcbiAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbnMgPSBhd2FpdCBhcGlDbGllbnQuZ2V0Q29udmVyc2F0aW9ucygpO1xuICAgICAgYXdhaXQgc3RhdGVNYW5hZ2VyLnVwZGF0ZUNvbnZlcnNhdGlvbnMoeyBjb252ZXJzYXRpb25zIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgUGVyaW9kaWMgdGFzayBmYWlsZWQ6JywgZXJyb3IpO1xuICB9XG59LCAzMDAwMCk7IC8vIEV2ZXJ5IDMwIHNlY29uZHNcblxuY29uc29sZS5sb2coJ+KchSBCYWNrZ3JvdW5kIHNjcmlwdCBzZXR1cCBjb21wbGV0ZScpOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/background/index.ts\n\n}");

/***/ }),

/***/ "./src/shared/api/index.ts":
/*!*********************************!*\
  !*** ./src/shared/api/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGPTAPIClient: () => (/* binding */ ChatGPTAPIClient),\n/* harmony export */   apiClient: () => (/* binding */ apiClient)\n/* harmony export */ });\nclass ChatGPTAPIClient {\n    constructor() {\n        this.baseUrl = 'https://chatgpt.com';\n        this.isAuthenticated = false;\n        this.checkAuthentication();\n    }\n    async checkAuthentication() {\n        try {\n            const response = await fetch(`${this.baseUrl}/api/auth/session`);\n            this.isAuthenticated = response.ok;\n        }\n        catch (error) {\n            console.warn('Failed to check authentication:', error);\n            this.isAuthenticated = false;\n        }\n    }\n    async makeRequest(endpoint, options = {}) {\n        const url = `${this.baseUrl}${endpoint}`;\n        const defaultOptions = {\n            headers: {\n                'Content-Type': 'application/json',\n                ...options.headers,\n            },\n            credentials: 'include',\n            ...options,\n        };\n        try {\n            const response = await fetch(url, defaultOptions);\n            if (!response.ok) {\n                throw new Error(`API request failed: ${response.status} ${response.statusText}`);\n            }\n            return await response.json();\n        }\n        catch (error) {\n            console.error(`API request failed for ${endpoint}:`, error);\n            throw error;\n        }\n    }\n    async getConversations() {\n        try {\n            const data = await this.makeRequest('/api/conversations');\n            return data.items.map(this.mapConversationFromAPI);\n        }\n        catch (error) {\n            console.error('Failed to fetch conversations:', error);\n            return [];\n        }\n    }\n    async getConversation(id) {\n        const data = await this.makeRequest(`/api/conversations/${id}`);\n        return this.mapConversationFromAPI(data);\n    }\n    async createConversation(title) {\n        const data = await this.makeRequest('/api/conversations', {\n            method: 'POST',\n            body: JSON.stringify({ title }),\n        });\n        return this.mapConversationFromAPI(data);\n    }\n    async updateConversation(id, updates) {\n        const data = await this.makeRequest(`/api/conversations/${id}`, {\n            method: 'PATCH',\n            body: JSON.stringify(updates),\n        });\n        return this.mapConversationFromAPI(data);\n    }\n    async deleteConversation(id) {\n        await this.makeRequest(`/api/conversations/${id}`, {\n            method: 'DELETE',\n        });\n    }\n    async getFolders() {\n        try {\n            const data = await this.makeRequest('/api/folders');\n            return data.items.map(this.mapFolderFromAPI);\n        }\n        catch (error) {\n            console.error('Failed to fetch folders:', error);\n            return [];\n        }\n    }\n    async createFolder(name, color) {\n        const data = await this.makeRequest('/api/folders', {\n            method: 'POST',\n            body: JSON.stringify({ name, color }),\n        });\n        return this.mapFolderFromAPI(data);\n    }\n    async updateFolder(id, updates) {\n        const data = await this.makeRequest(`/api/folders/${id}`, {\n            method: 'PATCH',\n            body: JSON.stringify(updates),\n        });\n        return this.mapFolderFromAPI(data);\n    }\n    async deleteFolder(id) {\n        await this.makeRequest(`/api/folders/${id}`, {\n            method: 'DELETE',\n        });\n    }\n    async getPrompts() {\n        try {\n            const data = await this.makeRequest('/api/prompts');\n            return data.items.map(this.mapPromptFromAPI);\n        }\n        catch (error) {\n            console.error('Failed to fetch prompts:', error);\n            return [];\n        }\n    }\n    async createPrompt(prompt) {\n        const data = await this.makeRequest('/api/prompts', {\n            method: 'POST',\n            body: JSON.stringify(prompt),\n        });\n        return this.mapPromptFromAPI(data);\n    }\n    async updatePrompt(id, updates) {\n        const data = await this.makeRequest(`/api/prompts/${id}`, {\n            method: 'PATCH',\n            body: JSON.stringify(updates),\n        });\n        return this.mapPromptFromAPI(data);\n    }\n    async deletePrompt(id) {\n        await this.makeRequest(`/api/prompts/${id}`, {\n            method: 'DELETE',\n        });\n    }\n    mapConversationFromAPI(data) {\n        return {\n            id: data.id,\n            title: data.title || 'Untitled',\n            messages: data.messages?.map(this.mapMessageFromAPI) || [],\n            createdAt: new Date(data.created_at || Date.now()),\n            updatedAt: new Date(data.updated_at || Date.now()),\n            folderId: data.folder_id,\n            isPinned: data.is_pinned || false,\n            tags: data.tags || [],\n        };\n    }\n    mapMessageFromAPI(data) {\n        return {\n            id: data.id,\n            role: data.role,\n            content: data.content,\n            timestamp: new Date(data.timestamp || Date.now()),\n            model: data.model,\n        };\n    }\n    mapFolderFromAPI(data) {\n        return {\n            id: data.id,\n            name: data.name,\n            color: data.color,\n            conversationIds: data.conversation_ids || [],\n            createdAt: new Date(data.created_at || Date.now()),\n        };\n    }\n    mapPromptFromAPI(data) {\n        return {\n            id: data.id,\n            title: data.title,\n            content: data.content,\n            category: data.category || 'general',\n            tags: data.tags || [],\n            isFavorite: data.is_favorite || false,\n            usageCount: data.usage_count || 0,\n            createdAt: new Date(data.created_at || Date.now()),\n            updatedAt: new Date(data.updated_at || Date.now()),\n        };\n    }\n}\nconst apiClient = new ChatGPTAPIClient();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztTQUNuRCxDQUFDO0lBQ0osQ0FBQztDQUNGO0FBR00sTUFBTSxTQUFTLEdBQUcsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaXNoa2EtZXh0ZW5zaW9uLy4vc3JjL3NoYXJlZC9hcGkvaW5kZXgudHM/MjE4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEFQSUNsaWVudCwgQ29udmVyc2F0aW9uLCBGb2xkZXIsIFByb21wdCB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIENoYXRHUFRBUElDbGllbnQgaW1wbGVtZW50cyBBUElDbGllbnQge1xuICBwcml2YXRlIGJhc2VVcmwgPSAnaHR0cHM6Ly9jaGF0Z3B0LmNvbSc7XG4gIHByaXZhdGUgaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jaGVja0F1dGhlbnRpY2F0aW9uKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrQXV0aGVudGljYXRpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9hcGkvYXV0aC9zZXNzaW9uYCk7XG4gICAgICB0aGlzLmlzQXV0aGVudGljYXRlZCA9IHJlc3BvbnNlLm9rO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBjaGVjayBhdXRoZW50aWNhdGlvbjonLCBlcnJvcik7XG4gICAgICB0aGlzLmlzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbWFrZVJlcXVlc3Q8VD4oZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fSk6IFByb21pc2U8VD4ge1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuYmFzZVVybH0ke2VuZHBvaW50fWA7XG4gICAgXG4gICAgY29uc3QgZGVmYXVsdE9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAuLi5vcHRpb25zLmhlYWRlcnMsXG4gICAgICB9LFxuICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgZGVmYXVsdE9wdGlvbnMpO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIHJlcXVlc3QgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBBUEkgcmVxdWVzdCBmYWlsZWQgZm9yICR7ZW5kcG9pbnR9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldENvbnZlcnNhdGlvbnMoKTogUHJvbWlzZTxDb252ZXJzYXRpb25bXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDx7IGl0ZW1zOiBhbnlbXSB9PignL2FwaS9jb252ZXJzYXRpb25zJyk7XG4gICAgICByZXR1cm4gZGF0YS5pdGVtcy5tYXAodGhpcy5tYXBDb252ZXJzYXRpb25Gcm9tQVBJKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIGNvbnZlcnNhdGlvbnM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldENvbnZlcnNhdGlvbihpZDogc3RyaW5nKTogUHJvbWlzZTxDb252ZXJzYXRpb24+IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDxhbnk+KGAvYXBpL2NvbnZlcnNhdGlvbnMvJHtpZH1gKTtcbiAgICByZXR1cm4gdGhpcy5tYXBDb252ZXJzYXRpb25Gcm9tQVBJKGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlQ29udmVyc2F0aW9uKHRpdGxlOiBzdHJpbmcpOiBQcm9taXNlPENvbnZlcnNhdGlvbj4ge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0PGFueT4oJy9hcGkvY29udmVyc2F0aW9ucycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0aXRsZSB9KSxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5tYXBDb252ZXJzYXRpb25Gcm9tQVBJKGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ29udmVyc2F0aW9uKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8Q29udmVyc2F0aW9uPik6IFByb21pc2U8Q29udmVyc2F0aW9uPiB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3Q8YW55PihgL2FwaS9jb252ZXJzYXRpb25zLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXBkYXRlcyksXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMubWFwQ29udmVyc2F0aW9uRnJvbUFQSShkYXRhKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUNvbnZlcnNhdGlvbihpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgL2FwaS9jb252ZXJzYXRpb25zLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldEZvbGRlcnMoKTogUHJvbWlzZTxGb2xkZXJbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDx7IGl0ZW1zOiBhbnlbXSB9PignL2FwaS9mb2xkZXJzJyk7XG4gICAgICByZXR1cm4gZGF0YS5pdGVtcy5tYXAodGhpcy5tYXBGb2xkZXJGcm9tQVBJKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIGZvbGRlcnM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUZvbGRlcihuYW1lOiBzdHJpbmcsIGNvbG9yPzogc3RyaW5nKTogUHJvbWlzZTxGb2xkZXI+IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDxhbnk+KCcvYXBpL2ZvbGRlcnMnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgY29sb3IgfSksXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMubWFwRm9sZGVyRnJvbUFQSShkYXRhKTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUZvbGRlcihpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPEZvbGRlcj4pOiBQcm9taXNlPEZvbGRlcj4ge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0PGFueT4oYC9hcGkvZm9sZGVycy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVwZGF0ZXMpLFxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLm1hcEZvbGRlckZyb21BUEkoZGF0YSk7XG4gIH1cblxuICBhc3luYyBkZWxldGVGb2xkZXIoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoYC9hcGkvZm9sZGVycy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBnZXRQcm9tcHRzKCk6IFByb21pc2U8UHJvbXB0W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3Q8eyBpdGVtczogYW55W10gfT4oJy9hcGkvcHJvbXB0cycpO1xuICAgICAgcmV0dXJuIGRhdGEuaXRlbXMubWFwKHRoaXMubWFwUHJvbXB0RnJvbUFQSSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBwcm9tcHRzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhdGVQcm9tcHQocHJvbXB0OiBPbWl0PFByb21wdCwgJ2lkJz4pOiBQcm9taXNlPFByb21wdD4ge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0PGFueT4oJy9hcGkvcHJvbXB0cycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocHJvbXB0KSxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5tYXBQcm9tcHRGcm9tQVBJKGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlUHJvbXB0KGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8UHJvbXB0Pik6IFByb21pc2U8UHJvbXB0PiB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3Q8YW55PihgL2FwaS9wcm9tcHRzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXBkYXRlcyksXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMubWFwUHJvbXB0RnJvbUFQSShkYXRhKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZVByb21wdChpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgL2FwaS9wcm9tcHRzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIE1hcHBpbmcgZnVuY3Rpb25zIHRvIGNvbnZlcnQgQVBJIHJlc3BvbnNlcyB0byBvdXIgdHlwZXNcbiAgcHJpdmF0ZSBtYXBDb252ZXJzYXRpb25Gcm9tQVBJKGRhdGE6IGFueSk6IENvbnZlcnNhdGlvbiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgdGl0bGU6IGRhdGEudGl0bGUgfHwgJ1VudGl0bGVkJyxcbiAgICAgIG1lc3NhZ2VzOiBkYXRhLm1lc3NhZ2VzPy5tYXAodGhpcy5tYXBNZXNzYWdlRnJvbUFQSSkgfHwgW10sXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGRhdGEuY3JlYXRlZF9hdCB8fCBEYXRlLm5vdygpKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoZGF0YS51cGRhdGVkX2F0IHx8IERhdGUubm93KCkpLFxuICAgICAgZm9sZGVySWQ6IGRhdGEuZm9sZGVyX2lkLFxuICAgICAgaXNQaW5uZWQ6IGRhdGEuaXNfcGlubmVkIHx8IGZhbHNlLFxuICAgICAgdGFnczogZGF0YS50YWdzIHx8IFtdLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIG1hcE1lc3NhZ2VGcm9tQVBJKGRhdGE6IGFueSk6IGFueSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgcm9sZTogZGF0YS5yb2xlLFxuICAgICAgY29udGVudDogZGF0YS5jb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShkYXRhLnRpbWVzdGFtcCB8fCBEYXRlLm5vdygpKSxcbiAgICAgIG1vZGVsOiBkYXRhLm1vZGVsLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIG1hcEZvbGRlckZyb21BUEkoZGF0YTogYW55KTogRm9sZGVyIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICBjb2xvcjogZGF0YS5jb2xvcixcbiAgICAgIGNvbnZlcnNhdGlvbklkczogZGF0YS5jb252ZXJzYXRpb25faWRzIHx8IFtdLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShkYXRhLmNyZWF0ZWRfYXQgfHwgRGF0ZS5ub3coKSksXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgbWFwUHJvbXB0RnJvbUFQSShkYXRhOiBhbnkpOiBQcm9tcHQge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogZGF0YS5pZCxcbiAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgY29udGVudDogZGF0YS5jb250ZW50LFxuICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnkgfHwgJ2dlbmVyYWwnLFxuICAgICAgdGFnczogZGF0YS50YWdzIHx8IFtdLFxuICAgICAgaXNGYXZvcml0ZTogZGF0YS5pc19mYXZvcml0ZSB8fCBmYWxzZSxcbiAgICAgIHVzYWdlQ291bnQ6IGRhdGEudXNhZ2VfY291bnQgfHwgMCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoZGF0YS5jcmVhdGVkX2F0IHx8IERhdGUubm93KCkpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZShkYXRhLnVwZGF0ZWRfYXQgfHwgRGF0ZS5ub3coKSksXG4gICAgfTtcbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgYXBpQ2xpZW50ID0gbmV3IENoYXRHUFRBUElDbGllbnQoKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/shared/api/index.ts\n\n}");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"background": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkishka_extension"] = self["webpackChunkishka_extension"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["shared"], () => (__webpack_require__("./src/background/index.ts")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;