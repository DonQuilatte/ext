(()=>{"use strict";var e,t={549:(e,t,n)=>{var o=n(582),i=n(678);async function s(){try{console.log("📊 Loading current state...");const e=await chrome.runtime.sendMessage({type:"GET_STATE"});e.state?function(e){try{const t=document.getElementById("premium-status");t&&(e.user?.isPremium?(t.textContent="Premium",t.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",t.style.color="white"):(t.textContent="Free",t.style.background="#f0f0f0",t.style.color="#666"));const n=document.getElementById("status-info");if(n){const t=e.user?.isLoggedIn?"Yes":"No",o=e.conversations?.conversations?.length||0,i=e.conversations?.folders?.length||0;n.innerHTML=`\n        <div><strong>Logged In:</strong> ${t}</div>\n        <div><strong>Conversations:</strong> ${o}</div>\n        <div><strong>Folders:</strong> ${i}</div>\n        <div><strong>Theme:</strong> ${e.user?.preferences?.theme||"auto"}</div>\n      `}console.log("✅ UI updated with state")}catch(e){console.error("❌ Failed to update UI with state:",e)}}(e.state):a("Failed to load state"),console.log("✅ State loaded")}catch(e){console.error("❌ Failed to load state:",e),a("Error loading state")}}function a(e){const t=document.getElementById("status-info");t&&(t.textContent=e)}async function r(){try{console.log("💎 Enabling premium features..."),a("Enabling premium features...");const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});e?.id&&await chrome.tabs.sendMessage(e.id,{type:"ENABLE_PREMIUM"}),await o.nl.updateUser({isPremium:!0}),await s(),a("Premium features enabled!"),console.log("✅ Premium features enabled")}catch(e){console.error("❌ Failed to enable premium features:",e),a("Failed to enable premium features")}}async function l(){try{console.log("🔄 Updating plan text..."),a("Updating plan text...");const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});e?.id&&await chrome.tabs.sendMessage(e.id,{type:"UPDATE_PLAN_TEXT"}),a("Plan text updated!"),console.log("✅ Plan text updated")}catch(e){console.error("❌ Failed to update plan text:",e),a("Failed to update plan text")}}async function d(){try{console.log("📚 Refreshing conversations..."),a("Refreshing conversations...");const e=await chrome.runtime.sendMessage({type:"API_REQUEST",payload:{method:"GET_CONVERSATIONS"}});e&&(await o.nl.updateConversations({conversations:e}),await s(),a("Conversations refreshed!")),console.log("✅ Conversations refreshed")}catch(e){console.error("❌ Failed to refresh conversations:",e),a("Failed to refresh conversations")}}async function c(){try{console.log("📊 Getting state...");const e=o.nl.getState();console.log("Current state:",e),a("State logged to console")}catch(e){console.error("❌ Failed to get state:",e),a("Failed to get state")}}async function p(){try{console.log("🗑️ Clearing storage..."),a("Clearing storage..."),await i.vg.clear(),await o.nl.resetState(),a("Storage cleared!"),console.log("✅ Storage cleared")}catch(e){console.error("❌ Failed to clear storage:",e),a("Failed to clear storage")}}function u(){console.log("⚙️ Opening settings..."),chrome.tabs.create({url:chrome.runtime.getURL("manage.html")})}function g(){console.log("❓ Opening help..."),chrome.tabs.create({url:"https://github.com/DonQuilatte/ext#readme"})}console.log("🎯 Ishka Extension Popup Initialized"),document.addEventListener("DOMContentLoaded",async()=>{try{console.log("🚀 Initializing popup..."),await async function(){try{console.log("🎨 Setting up popup UI...");const e=document.createElement("div");e.id="ishka-popup-container",e.className="ishka-popup",e.style.cssText="\n      width: 320px;\n      min-height: 400px;\n      padding: 16px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      background: white;\n    ";const t=function(){const e=document.createElement("div");return e.className="popup-header",e.style.cssText="\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 16px;\n    padding-bottom: 12px;\n    border-bottom: 1px solid #e5e5e5;\n  ",e.innerHTML='\n    <div style="display: flex; align-items: center; gap: 8px;">\n      <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 6px;"></div>\n      <div>\n        <div style="font-weight: 600; font-size: 16px; color: #333;">Ishka</div>\n        <div style="font-size: 12px; color: #666;">Enhanced ChatGPT</div>\n      </div>\n    </div>\n    <div id="premium-status" style="font-size: 12px; padding: 4px 8px; border-radius: 12px; background: #f0f0f0; color: #666;">\n      Free\n    </div>\n  ',e}();e.appendChild(t);const n=function(){const e=document.createElement("div");return e.className="popup-content",e.style.cssText="\n    flex: 1;\n    margin-bottom: 16px;\n  ",e.innerHTML='\n    <div class="content-section">\n      <h3 style="margin: 0 0 12px 0; font-size: 14px; font-weight: 600; color: #333;">Quick Actions</h3>\n      <div class="action-buttons" style="display: flex; flex-direction: column; gap: 8px;">\n        <button id="enable-premium" class="action-btn" style="\n          padding: 8px 12px;\n          border: 1px solid #10a37f;\n          background: #10a37f;\n          color: white;\n          border-radius: 6px;\n          font-size: 13px;\n          cursor: pointer;\n          transition: all 0.2s;\n        ">Enable Premium Features</button>\n        <button id="update-plan-text" class="action-btn" style="\n          padding: 8px 12px;\n          border: 1px solid #e5e5e5;\n          background: white;\n          color: #333;\n          border-radius: 6px;\n          font-size: 13px;\n          cursor: pointer;\n          transition: all 0.2s;\n        ">Update Plan Text</button>\n        <button id="refresh-conversations" class="action-btn" style="\n          padding: 8px 12px;\n          border: 1px solid #e5e5e5;\n          background: white;\n          color: #333;\n          border-radius: 6px;\n          font-size: 13px;\n          cursor: pointer;\n          transition: all 0.2s;\n        ">Refresh Conversations</button>\n      </div>\n    </div>\n    \n    <div class="content-section" style="margin-top: 20px;">\n      <h3 style="margin: 0 0 12px 0; font-size: 14px; font-weight: 600; color: #333;">Status</h3>\n      <div id="status-info" style="font-size: 12px; color: #666; line-height: 1.4;">\n        Loading...\n      </div>\n    </div>\n    \n    <div class="content-section" style="margin-top: 20px;">\n      <h3 style="margin: 0 0 12px 0; font-size: 14px; font-weight: 600; color: #333;">Debug</h3>\n      <div style="display: flex; flex-direction: column; gap: 8px;">\n        <button id="get-state" class="debug-btn" style="\n          padding: 6px 10px;\n          border: 1px solid #e5e5e5;\n          background: white;\n          color: #333;\n          border-radius: 4px;\n          font-size: 11px;\n          cursor: pointer;\n        ">Get State</button>\n        <button id="clear-storage" class="debug-btn" style="\n          padding: 6px 10px;\n          border: 1px solid #e5e5e5;\n          background: white;\n          color: #333;\n          border-radius: 4px;\n          font-size: 11px;\n          cursor: pointer;\n        ">Clear Storage</button>\n      </div>\n    </div>\n  ',e}();e.appendChild(n);const o=function(){const e=document.createElement("div");return e.className="popup-footer",e.style.cssText="\n    padding-top: 12px;\n    border-top: 1px solid #e5e5e5;\n    font-size: 11px;\n    color: #999;\n    text-align: center;\n  ",e.innerHTML='\n    <div>Version 3.9.7</div>\n    <div style="margin-top: 4px;">\n      <a href="#" id="open-settings" style="color: #10a37f; text-decoration: none;">Settings</a> • \n      <a href="#" id="open-help" style="color: #10a37f; text-decoration: none;">Help</a>\n    </div>\n  ',e}();e.appendChild(o),document.body.innerHTML="",document.body.appendChild(e),console.log("✅ Popup UI created")}catch(e){console.error("❌ Failed to create popup UI:",e)}}(),console.log("🎧 Setting up popup event listeners..."),document.getElementById("enable-premium")?.addEventListener("click",r),document.getElementById("update-plan-text")?.addEventListener("click",l),document.getElementById("refresh-conversations")?.addEventListener("click",d),document.getElementById("get-state")?.addEventListener("click",c),document.getElementById("clear-storage")?.addEventListener("click",p),document.getElementById("open-settings")?.addEventListener("click",u),document.getElementById("open-help")?.addEventListener("click",g),document.querySelectorAll(".action-btn, .debug-btn").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.opacity="0.8"}),e.addEventListener("mouseleave",()=>{e.style.opacity="1"})}),console.log("✅ Popup event listeners set up"),await s(),console.log("✅ Popup initialization complete")}catch(e){console.error("❌ Popup initialization failed:",e)}}),console.log("🎯 Popup script loaded and ready")}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,n,i,s)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,i,s]=e[c],r=!0,l=0;l<n.length;l++)(!1&s||a>=s)&&Object.keys(o.O).every(e=>o.O[e](n[l]))?n.splice(l--,1):(r=!1,s<a&&(a=s));if(r){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,i,s]},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={887:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var i,s,[a,r,l]=n,d=0;if(a.some(t=>0!==e[t])){for(i in r)o.o(r,i)&&(o.m[i]=r[i]);if(l)var c=l(o)}for(t&&t(n);d<a.length;d++)s=a[d],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(c)},n=self.webpackChunkishka_extension=self.webpackChunkishka_extension||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[804],()=>o(549));i=o.O(i)})();
//# sourceMappingURL=popup.js.map