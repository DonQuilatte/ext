!function(){"use strict";console.log("[VERIFY] Starting offline mode verification...");const e={configLoaded:!1,mockBackendLoaded:!1,externalCallsBlocked:!1,premiumFeaturesEnabled:!1,authMocked:!1,paymentsMocked:!1};function o(){window.DEV_MODE_CONFIG||(console.warn("[VERIFY] Creating emergency DEV_MODE_CONFIG..."),window.DEV_MODE_CONFIG={MOCK_PREMIUM:!0,LOCAL_ONLY_MODE:!0,BLOCK_EXTERNAL_APIS:!0,ENABLE_DEBUG_LOGGING:!0}),window.MOCK_BACKEND||(console.warn("[VERIFY] Creating emergency MOCK_BACKEND..."),window.MOCK_BACKEND={enabled:!0,mockResponses:!0,shouldMock:function(e){return e.includes("api.infi-dev.com")||e.includes("example-removed")||e.includes("infi-dev")||e.includes("lemonsqueezy.com")},getMockResponse:function(e){return e.includes("/auth/generate-jwt")?{jwt:"mock.jwt.token.for.local.development",success:!0}:e.includes("/folder/")||e.includes("/conversation/")?[]:{success:!0,mocked:!0}}})}async function n(){console.log("[VERIFY] Running comprehensive offline mode tests..."),o(),"undefined"!=typeof window&&window.DEV_MODE_CONFIG?(console.log("[VERIFY] ‚úì Development mode configuration loaded"),e.configLoaded=!0):console.error("[VERIFY] ‚úó Development mode configuration not found"),o(),"undefined"!=typeof window&&window.MOCK_BACKEND?(console.log("[VERIFY] ‚úì Mock backend loaded"),e.mockBackendLoaded=!0):console.error("[VERIFY] ‚úó Mock backend not found"),await async function(){try{const o=await fetch("https://api.infi-dev.com/example-removed/auth/generate-jwt"),n=await o.text();return n.includes("MOCK_RESPONSE")||n.includes("jwt")?(console.log("[VERIFY] ‚úì External API calls are being mocked"),e.externalCallsBlocked=!0,!0):(console.warn("[VERIFY] ‚ö† External API call went through - may not be properly mocked"),!1)}catch(o){return o.message.includes("blocked in development mode")?(console.log("[VERIFY] ‚úì External API calls are properly blocked"),e.externalCallsBlocked=!0,!0):(console.error("[VERIFY] ‚úó Unexpected error testing external calls:",o),!1)}}(),"undefined"!=typeof window&&(window.DEV_MODE_PREMIUM||window.DEV_MODE_CONFIG&&window.DEV_MODE_CONFIG.MOCK_PREMIUM)?(console.log("[VERIFY] ‚úì Premium features are enabled in development mode"),e.premiumFeaturesEnabled=!0):console.warn("[VERIFY] ‚ö† Premium features may not be properly mocked"),await async function(){if(window.MOCK_BACKEND&&window.MOCK_BACKEND.mockResponses){const o=["https://api.infi-dev.com/example-removed/auth/generate-jwt","https://api.infi-dev.com/example-removed/auth/jwks"];let n=!0;for(const e of o)if(!window.MOCK_BACKEND.shouldMock(e)){n=!1;break}if(n)return console.log("[VERIFY] ‚úì Authentication endpoints are mocked"),e.authMocked=!0,!0}return console.warn("[VERIFY] ‚ö† Authentication mocking may not be complete"),!1}(),await async function(){if(window.MOCK_BACKEND&&window.MOCK_BACKEND.mockResponses){const o=["https://api.infi-dev.com/example-removed/payments/validate-subscription","https://api.infi-dev.com/example-removed/user/cancel-deletion"];let n=!0;for(const e of o)if(!window.MOCK_BACKEND.shouldMock(e)){n=!1;break}if(n)return console.log("[VERIFY] ‚úì Payment endpoints are mocked"),e.paymentsMocked=!0,!0}return console.warn("[VERIFY] ‚ö† Payment mocking may not be complete"),!1}();const n=Object.values(e).filter(e=>!0===e).length,t=Object.keys(e).length;console.log("\n[VERIFY] Test Results Summary:"),console.log("================================");for(const[o,n]of Object.entries(e))console.log(`${n?"‚úì":"‚úó"} ${o}: ${n?"PASS":"FAIL"}`);return console.log(`\nOverall: ${n}/${t} tests passed`),n===t?console.log("\nüéâ All tests passed! Extension is ready for offline development."):console.warn("\n‚ö†Ô∏è  Some tests failed. Please check the configuration."),e}let t=0;async function s(){t++,console.log(`[VERIFY] Test attempt ${t}/3`);const e=await n(),o=Object.values(e).filter(e=>!0===e).length,c=Object.keys(e).length;return o<c&&t<3?(console.log(`[VERIFY] Retrying in 2 seconds... (${o}/${c} passed)`),setTimeout(s,2e3)):o===c?console.log("[VERIFY] ‚úÖ All tests passed successfully!"):console.log(`[VERIFY] ‚ö†Ô∏è Final result: ${o}/${c} tests passed after ${t} attempts`),e}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(s,2e3)}):setTimeout(s,2e3),window.verifyOfflineMode=n,window.quickVerify=function(){console.log("üîç QUICK OFFLINE VERIFICATION"),console.log("============================");const e={"DEV_MODE_CONFIG loaded":void 0!==window.DEV_MODE_CONFIG,"Mock backend available":void 0!==window.mockBackend||void 0!==window.MOCK_BACKEND,"Premium features mocked":"function"==typeof window.mockPremiumFeatures,"Fetch overridden":window.fetch&&window.fetch.toString().includes("originalFetch")};for(const[o,n]of Object.entries(e))console.log(`${n?"‚úÖ":"‚ùå"} ${o}`);const o=Object.values(e).filter(Boolean).length;return console.log(`\nResult: ${o}/${Object.keys(e).length} checks passed`),o===Object.keys(e).length?console.log("üéâ Extension is ready for offline development!"):console.log("‚ö†Ô∏è Some issues detected - try reloading the extension"),e}}();