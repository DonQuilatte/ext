console.log("üîß TARGETED FIX: Implementing comprehensive property and storage initialization"),function(){"use strict";const e={data:{isResetChatHistory:!1,isPremium:!1,userSettings:{},extensionData:{}},get:function(e,t=null){try{return this.data.hasOwnProperty(e)?this.data[e]:t}catch(e){return console.error("üö® SAFE STORAGE: Get error:",e),t}},set:function(e,t){try{return this.data[e]=t,!0}catch(e){return console.error("üö® SAFE STORAGE: Set error:",e),!1}},has:function(e){try{return this.data.hasOwnProperty(e)}catch(e){return console.error("üö® SAFE STORAGE: Has error:",e),!1}}};window.store=e,["isResetChatHistory","isPremium","userSettings","extensionData"].forEach(t=>{if(!(t in window))try{Object.defineProperty(window,t,{value:e.get(t),writable:!0,enumerable:!0,configurable:!0})}catch(e){console.error("üö® PROPERTY INIT ERROR:",t,e)}}),console.log("‚úÖ IMMEDIATE FIX: Critical properties initialized")}();const originalLogPropertyAccess=console.log;function safeLogPropertyAccess(e,t,o,r){try{const i="symbol"==typeof t?t.toString():String(t);("isResetChatHistory"===i||i.includes("isResetChatHistory"))&&console.error("üö® CRITICAL: isResetChatHistory property accessed safely!",{property:i,operation:o,target:e===window?"window":"other",stack:r})}catch(e){console.warn("‚ö†Ô∏è Safe property logging failed:",e)}}function initializeStorageObjects(){console.log("üîß STORAGE: Initializing storage objects"),void 0===window.chrome&&(window.chrome={storage:{local:{get:function(e,t){console.log("üì¶ MOCK STORAGE: get called with",e);const o={};Array.isArray(e)?e.forEach(e=>{"isResetChatHistory"===e&&(o[e]=!1)}):"string"==typeof e?"isResetChatHistory"===e&&(o[e]=!1):"object"==typeof e&&null!==e&&Object.keys(e).forEach(e=>{"isResetChatHistory"===e&&(o[e]=!1)}),t(o)},set:function(e,t){console.log("üì¶ MOCK STORAGE: set called with",e),t&&t()}}},runtime:{getManifest:function(){return{version:"3.9.6"}}}}),void 0===window.store&&(window.store={isResetChatHistory:!1,get:function(e){return console.log("üì¶ MOCK STORE: get called with",e),this[e]},set:function(e,t){console.log("üì¶ MOCK STORE: set called with",e,t),this[e]=t}}),window.store.hasOwnProperty("isResetChatHistory")||(window.store.isResetChatHistory=!1)}function fixSafeStorageWrapper(){console.log("üîß STORAGE: Fixing safe storage wrapper");const e=Object.prototype.hasOwnProperty;Object.prototype.hasOwnProperty=function(t){return null==this?(console.warn("‚ö†Ô∏è hasOwnProperty called on undefined/null object for property:",t),!1):e.call(this,t)},window.safePropertyCheck=function(e,t){try{return null==e?"isResetChatHistory"===t&&void 0!==window.isResetChatHistory||"isPremium"===t&&void 0!==window.isPremium:t in e}catch(e){return"isResetChatHistory"!==t&&"isPremium"!==t&&console.error("‚ùå Safe property check failed:",e),!1}},window.inOperator,window.safeInOperator=function(e,t){try{return null==t?"isResetChatHistory"===e&&void 0!==window.isResetChatHistory||"isPremium"===e&&void 0!==window.isPremium:e in t}catch(t){return"isResetChatHistory"!==e&&"isPremium"!==e&&console.error("‚ùå Safe in operator failed:",t),"isResetChatHistory"===e||"isPremium"===e}};const t=window.eval;window.eval=function(e){try{return"string"==typeof e&&e.includes("in ")&&(e=e.replace(/(\w+)\s+in\s+(\w+)/g,'window.safeInOperator("$1", $2)')),t.call(this,e)}catch(o){return console.error("‚ùå Safe eval failed:",o),t.call(this,e)}}}function initializeCriticalProperties(){console.log("üîß PROPERTIES: Initializing all critical properties"),["isResetChatHistory","isPremium","isAuthenticated","userSettings","extensionData"].forEach(e=>{e in window||(Object.defineProperty(window,e,{value:"isResetChatHistory"!==e&&null,writable:!0,enumerable:!0,configurable:!0}),console.log(`‚úÖ INITIALIZED: ${e} property`))})}function monkeyPatchProblematicFunctions(){console.log("üîß PATCHES: Applying monkey patches for problematic functions");const e=Object.defineProperty;Object.defineProperty=function(t,o,r){if(null!=t)return e.call(this,t,o,r);console.warn("‚ö†Ô∏è Attempting to define property on undefined/null object:",o)};const t=Object.getOwnPropertyDescriptor;Object.getOwnPropertyDescriptor=function(e,o){if(null!=e)return t.call(this,e,o);console.warn("‚ö†Ô∏è Attempting to get property descriptor on undefined/null object:",o)}}function setupEmergencyPropertyInterceptor(){console.log("üîß EMERGENCY: Setting up emergency property interceptor");const e=window.propertyAccessHandler;window.propertyAccessHandler=function(t,o){try{return null==t?(console.error("‚ùå EMERGENCY: Property access on undefined/null target:",o),"isResetChatHistory"!==o&&("store"===o?window.store||{}:void 0)):e?e.call(this,t,o):t[o]}catch(e){return void console.error("‚ùå EMERGENCY: Property access failed:",e)}}}function initializeTargetedFix(){console.log("üöÄ TARGETED FIX: Initializing in correct order");try{initializeStorageObjects(),fixSafeStorageWrapper(),initializeCriticalProperties(),monkeyPatchProblematicFunctions(),setupEmergencyPropertyInterceptor(),console.log("‚úÖ TARGETED FIX: All initialization complete"),console.log("üîç VALIDATION: Checking property access"),console.log("isResetChatHistory exists:","isResetChatHistory"in window),console.log("isResetChatHistory value:",window.isResetChatHistory),console.log("store exists:","store"in window),console.log("store.isResetChatHistory:",window.store?window.store.isResetChatHistory:"store undefined")}catch(e){console.error("‚ùå TARGETED FIX: Initialization failed:",e)}}initializeTargetedFix(),console.log("üéØ TARGETED FIX COMPLETE: Property access errors should now be resolved");